<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Amazon Bedrock cookbook website"><meta name=author content=Bedrock-GTM><link href=https://github.amazon-bedrock-samples.com/agents-and-function-calling/function-calling/function_calling_with_converse/function_calling_with_converse/ rel=canonical><link href=../../../bedrock-agents/use-case-examples/product-review-agent/main/ rel=prev><link href=../../function_calling_with_invoke/function_calling_model_with_invoke/ rel=next><link rel=icon href=../../../../assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.49"><title>Function Calling with Converse - Amazon Bedrock Recipes</title><link rel=stylesheet href=../../../../assets/stylesheets/main.6f8fc17f.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title="Amazon Bedrock Recipes" class="md-header__button md-logo" aria-label="Amazon Bedrock Recipes" data-md-component=logo> <img src=../../../../logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Amazon Bedrock Recipes </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Function Calling with Converse </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=purple aria-hidden=true type=radio name=__palette id=__palette_0> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/aws-samples/amazon-bedrock-samples/tree/main title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> Github: Amazon-Bedrock-Samples </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="Amazon Bedrock Recipes" class="md-nav__button md-logo" aria-label="Amazon Bedrock Recipes" data-md-component=logo> <img src=../../../../logo.png alt=logo> </a> Amazon Bedrock Recipes </label> <div class=md-nav__source> <a href=https://github.com/aws-samples/amazon-bedrock-samples/tree/main title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> Github: Amazon-Bedrock-Samples </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> Intro to Amazon Bedrock </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Intro to Amazon Bedrock </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1_1> <label class=md-nav__link for=__nav_2_1_1 id=__nav_2_1_1_label tabindex=0> <span class=md-ellipsis> API Usage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1_1> <span class="md-nav__icon md-icon"></span> API Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../introduction-to-bedrock/bedrock_apis/01_invoke_api/ class=md-nav__link> <span class=md-ellipsis> Invoke Model API Example </span> </a> </li> <li class=md-nav__item> <a href=../../../../introduction-to-bedrock/bedrock_apis/04_agents_api/ class=md-nav__link> <span class=md-ellipsis> Agents API Example </span> </a> </li> <li class=md-nav__item> <a href=../../../../introduction-to-bedrock/bedrock_apis/03_knowledgebases_api/ class=md-nav__link> <span class=md-ellipsis> Knowledge Bases API Example </span> </a> </li> <li class=md-nav__item> <a href=../../../../introduction-to-bedrock/bedrock_apis/02_guardrails_api/ class=md-nav__link> <span class=md-ellipsis> Guardrail API Example </span> </a> </li> <li class=md-nav__item> <a href=../../../../introduction-to-bedrock/converse_api/01_converse_api/ class=md-nav__link> <span class=md-ellipsis> Converse API Example </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Agents </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Agents </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_1> <label class=md-nav__link for=__nav_2_2_1 id=__nav_2_2_1_label tabindex=0> <span class=md-ellipsis> Amazon Bedrock Agents </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_1> <span class="md-nav__icon md-icon"></span> Amazon Bedrock Agents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../introduction-to-agents/how_to_create_custom_agents/ class=md-nav__link> <span class=md-ellipsis> How to create an Agent </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_1_2> <label class=md-nav__link for=__nav_2_2_1_2 id=__nav_2_2_1_2_label tabindex=0> <span class=md-ellipsis> Bedrock Agent Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_1_2> <span class="md-nav__icon md-icon"></span> Bedrock Agent Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/01-create-agent-with-function-definition/01-create-agent-with-function-definition/ class=md-nav__link> <span class=md-ellipsis> Create Agent with Function Definition </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/02-create-agent-with-api-schema/02-create-agent-with-api-schema/ class=md-nav__link> <span class=md-ellipsis> Create Agent with API Schema </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/03-create-agent-with-return-of-control/03-create-agent-with-return-of-control/ class=md-nav__link> <span class=md-ellipsis> Create Agent with Return of Control </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/04-create-agent-with-single-knowledge-base/04-create-agent-with-single-knowledge-base/ class=md-nav__link> <span class=md-ellipsis> Create Agent with Single Knowledge Base </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/05-create-agent-with-knowledge-base-and-action-group/05-create-agent-with-knowledge-base-and-action-group/ class=md-nav__link> <span class=md-ellipsis> Create Agent with Knowledge Base and Action Group </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/06-prompt-and-session-attributes/06-prompt-and-session-attributes/ class=md-nav__link> <span class=md-ellipsis> Prompt and Session Attributes </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/07-advanced-prompts-and-custom-parsers/07-custom-prompt-and-lambda-parsers/ class=md-nav__link> <span class=md-ellipsis> Custom Prompt and Lambda Parsers </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/08-create-agent-with-guardrails/08-create-agent-with-guardrails/ class=md-nav__link> <span class=md-ellipsis> Create Agent with Guardrails </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/09-create-agent-with-memory/09-create-agent-with-memory/ class=md-nav__link> <span class=md-ellipsis> Create Agent with Memory </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/10-create-agent-with-code-interpreter/10-create-agent-with-code-interpreter/ class=md-nav__link> <span class=md-ellipsis> Create Agent with Code Interpreter </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/14-create-agent-with-custom-orchestration/custom_orchestration_example/ class=md-nav__link> <span class=md-ellipsis> Create Agent with Custom Orchestration </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/features-examples/15-invoke-inline-agents/inline-agent-api-usage/ class=md-nav__link> <span class=md-ellipsis> Create Dynamic Tooling Inline Agents </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_1_3> <label class=md-nav__link for=__nav_2_2_1_3 id=__nav_2_2_1_3_label tabindex=0> <span class=md-ellipsis> Bedrock Flows </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_1_3> <span class="md-nav__icon md-icon"></span> Bedrock Flows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../bedrock-agents/bedrock-flows/Getting_started_with_Prompt_Management_Flows/ class=md-nav__link> <span class=md-ellipsis> Getting Started with Prompt Management Flows </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_1_4> <label class=md-nav__link for=__nav_2_2_1_4 id=__nav_2_2_1_4_label tabindex=0> <span class=md-ellipsis> Use Case Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_1_4> <span class="md-nav__icon md-icon"></span> Use Case Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../bedrock-agents/use-case-examples/text-2-sql-agent/create_and_invoke_sql_agent/ class=md-nav__link> <span class=md-ellipsis> Text to SQL Agent </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/use-case-examples/agentsforbedrock-retailagent/workshop/test_retailagent_agentsforbedrock/ class=md-nav__link> <span class=md-ellipsis> Retail Agent Workshop </span> </a> </li> <li class=md-nav__item> <a href=../../../bedrock-agents/use-case-examples/product-review-agent/main/ class=md-nav__link> <span class=md-ellipsis> Product Review Agent </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_2 checked> <label class=md-nav__link for=__nav_2_2_2 id=__nav_2_2_2_label tabindex=0> <span class=md-ellipsis> Function Calling </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> Function Calling </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Function Calling with Converse </span> </a> </li> <li class=md-nav__item> <a href=../../function_calling_with_invoke/function_calling_model_with_invoke/ class=md-nav__link> <span class=md-ellipsis> Function Calling with Invoke </span> </a> </li> <li class=md-nav__item> <a href=../../return_of_control/return_of_control/ class=md-nav__link> <span class=md-ellipsis> Return of Control </span> </a> </li> <li class=md-nav__item> <a href=../../tool_binding/tool_bindings/ class=md-nav__link> <span class=md-ellipsis> Tool Binding </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3> <label class=md-nav__link for=__nav_2_2_3 id=__nav_2_2_3_label tabindex=0> <span class=md-ellipsis> Open Source </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> Open Source </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3_1> <label class=md-nav__link for=__nav_2_2_3_1 id=__nav_2_2_3_1_label tabindex=0> <span class=md-ellipsis> CrewAI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3_1> <span class="md-nav__icon md-icon"></span> CrewAI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../open-source-agents/crew.ai/Find%20dream%20destination%20with%20CrewAI/ class=md-nav__link> <span class=md-ellipsis> Find Dream Destination with CrewAI </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3_2> <label class=md-nav__link for=__nav_2_2_3_2 id=__nav_2_2_3_2_label tabindex=0> <span class=md-ellipsis> LangGraph </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3_2> <span class="md-nav__icon md-icon"></span> LangGraph </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../open-source-agents/langgraph/langgraph-single-agent/ class=md-nav__link> <span class=md-ellipsis> LangGraph Agent with Function Calling </span> </a> </li> <li class=md-nav__item> <a href=../../../open-source-agents/langgraph/langgraph-agents-multimodal/ class=md-nav__link> <span class=md-ellipsis> LangGraph Multi-Modal Agent with Function Calling </span> </a> </li> <li class=md-nav__item> <a href=../../../open-source-agents/langgraph/langgraph-multi-agent-sql-tools/ class=md-nav__link> <span class=md-ellipsis> LangGraph Multi Agent Orchestration </span> </a> </li> <li class=md-nav__item> <a href=../../../open-source-agents/langgraph/02_medibot_V3_agents/ class=md-nav__link> <span class=md-ellipsis> LangGraph Multi Agent For Medical Chatbot </span> </a> </li> <li class=md-nav__item> <a href=../../../open-source-agents/langgraph/langgraph-fact-checker-feedback-loop/ class=md-nav__link> <span class=md-ellipsis> LangGraph Fact Checker with Multi Agent </span> </a> </li> <li class=md-nav__item> <a href=../../../open-source-agents/langgraph/langgraph-multi-agent-sql-tools/ class=md-nav__link> <span class=md-ellipsis> LangGraph Multi Agent Orchestration </span> </a> </li> <li class=md-nav__item> <a href=../../../open-source-agents/langgraph/03_langgraph_agents_of_agent/ class=md-nav__link> <span class=md-ellipsis> LangGraph Multi Agent with tools </span> </a> </li> <li class=md-nav__item> <a href=../../../open-source-agents/langgraph/Travel_planner_with_langgraph/ class=md-nav__link> <span class=md-ellipsis> Managing Memory for Multi Agents </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3_3> <label class=md-nav__link for=__nav_2_2_3_3 id=__nav_2_2_3_3_label tabindex=0> <span class=md-ellipsis> Multi Agent </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3_3> <span class="md-nav__icon md-icon"></span> Multi Agent </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../introduction-to-agents/how_to_create_multi_agents_from_custom_agents/ class=md-nav__link> <span class=md-ellipsis> Multi Agent Orchestration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> RAG </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> RAG </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1> <label class=md-nav__link for=__nav_2_3_1 id=__nav_2_3_1_label tabindex=0> <span class=md-ellipsis> Amazon Bedrock Knowledge Bases </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1> <span class="md-nav__icon md-icon"></span> Amazon Bedrock Knowledge Bases </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1_1> <label class=md-nav__link for=__nav_2_3_1_1 id=__nav_2_3_1_1_label tabindex=0> <span class=md-ellipsis> Zero Setup </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1_1> <span class="md-nav__icon md-icon"></span> Zero Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/00-zero-setup-chat-with-your-document/chat_with_document_kb/ class=md-nav__link> <span class=md-ellipsis> Chat with Your Document </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1_2> <label class=md-nav__link for=__nav_2_3_1_2 id=__nav_2_3_1_2_label tabindex=0> <span class=md-ellipsis> RAG Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1_2> <span class="md-nav__icon md-icon"></span> RAG Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/01-rag-concepts/01_create_ingest_documents_test_kb_multi_ds/ class=md-nav__link> <span class=md-ellipsis> Create and Ingest Documents with Multi-Data Sources </span> </a> </li> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/01-rag-concepts/02_managed_rag_custom_prompting_and_no_of_results/ class=md-nav__link> <span class=md-ellipsis> Managed RAG with Custom Prompting </span> </a> </li> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/01-rag-concepts/03_customized-rag-retreive-api-hybrid-search-claude-3-sonnet-langchain/ class=md-nav__link> <span class=md-ellipsis> Customized RAG with Claude 3 and Langchain </span> </a> </li> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/01-rag-concepts/04_customized-rag-retreive-api-langchain-claude-evaluation-ragas/ class=md-nav__link> <span class=md-ellipsis> RAG Evaluation with Langchain and RAGAS </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1_3> <label class=md-nav__link for=__nav_2_3_1_3 id=__nav_2_3_1_3_label tabindex=0> <span class=md-ellipsis> Optimizing Retrieval Results </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1_3> <span class="md-nav__icon md-icon"></span> Optimizing Retrieval Results </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/02-optimizing-accuracy-retrieved-results/advanced_chunking_options/ class=md-nav__link> <span class=md-ellipsis> Advanced Chunking Options </span> </a> </li> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/02-optimizing-accuracy-retrieved-results/csv_metadata_customization/ class=md-nav__link> <span class=md-ellipsis> CSV Metadata Customization </span> </a> </li> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/02-optimizing-accuracy-retrieved-results/query_reformulation/ class=md-nav__link> <span class=md-ellipsis> Query Reformulation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1_4> <label class=md-nav__link for=__nav_2_3_1_4 id=__nav_2_3_1_4_label tabindex=0> <span class=md-ellipsis> Advanced Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1_4> <span class="md-nav__icon md-icon"></span> Advanced Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/03-advanced-concepts/dynamic-metadata-filtering/dynamic-metadata-filtering-KB/ class=md-nav__link> <span class=md-ellipsis> Dynamic Metadata Filtering </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1_4_2> <label class=md-nav__link for=__nav_2_3_1_4_2 id=__nav_2_3_1_4_2_label tabindex=0> <span class=md-ellipsis> Reranking </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_3_1_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1_4_2> <span class="md-nav__icon md-icon"></span> Reranking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/03-advanced-concepts/reranking/01_deploy-reranking-model-sm/ class=md-nav__link> <span class=md-ellipsis> Deploy Reranking Model </span> </a> </li> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/03-advanced-concepts/reranking/02_kb-reranker/ class=md-nav__link> <span class=md-ellipsis> Knowledge Base Reranker </span> </a> </li> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/03-advanced-concepts/reranking/qa-generator/ class=md-nav__link> <span class=md-ellipsis> QA Generator </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1_5> <label class=md-nav__link for=__nav_2_3_1_5 id=__nav_2_3_1_5_label tabindex=0> <span class=md-ellipsis> Responsible AI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_1_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1_5> <span class="md-nav__icon md-icon"></span> Responsible AI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/features-examples/05-responsible-ai/contextual-grounding/ class=md-nav__link> <span class=md-ellipsis> Contextual Grounding </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1_6> <label class=md-nav__link for=__nav_2_3_1_6 id=__nav_2_3_1_6_label tabindex=0> <span class=md-ellipsis> Use Case Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_1_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1_6> <span class="md-nav__icon md-icon"></span> Use Case Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1_6_1> <label class=md-nav__link for=__nav_2_3_1_6_1 id=__nav_2_3_1_6_1_label tabindex=0> <span class=md-ellipsis> Metadata Filter Access Control </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_3_1_6_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1_6_1> <span class="md-nav__icon md-icon"></span> Metadata Filter Access Control </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/use-case-examples/metadata-filter-access-control/kb-end-to-end-acl/ class=md-nav__link> <span class=md-ellipsis> End-to-End ACL with Knowledge Base </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1_6_2> <label class=md-nav__link for=__nav_2_3_1_6_2 id=__nav_2_3_1_6_2_label tabindex=0> <span class=md-ellipsis> RAG with Structured and Unstructured Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_3_1_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1_6_2> <span class="md-nav__icon md-icon"></span> RAG with Structured and Unstructured Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/use-case-examples/rag-using-structured-unstructured-data/0-create-dummy-structured-data/ class=md-nav__link> <span class=md-ellipsis> Create Dummy Structured Data </span> </a> </li> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/use-case-examples/rag-using-structured-unstructured-data/1_create_sql_dataset_optional/ class=md-nav__link> <span class=md-ellipsis> Create SQL Dataset (Optional) </span> </a> </li> <li class=md-nav__item> <a href=../../../../rag/knowledge-bases/use-case-examples/rag-using-structured-unstructured-data/2_rag_with_structured_unstructured_data/ class=md-nav__link> <span class=md-ellipsis> RAG with Structured and Unstructured Data </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_2> <label class=md-nav__link for=__nav_2_3_2 id=__nav_2_3_2_label tabindex=0> <span class=md-ellipsis> Open Source </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_2> <span class="md-nav__icon md-icon"></span> Open Source </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../rag/open-source/chatbots/qa_chatbot_langchain_bedrock/ class=md-nav__link> <span class=md-ellipsis> Chatbot using Langchain </span> </a> </li> <li class=md-nav__item> <a href=../../../../rag/open-source/chunking/rag_chunking_strategies_langchain_bedrock/ class=md-nav__link> <span class=md-ellipsis> Chunking strategies for RAG applications </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_2_3> <label class=md-nav__link for=__nav_2_3_2_3 id=__nav_2_3_2_3_label tabindex=0> <span class=md-ellipsis> Vector Stores </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_2_3> <span class="md-nav__icon md-icon"></span> Vector Stores </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../rag/open-source/vector_stores/rag_langchain_bedrock_opensearch/ class=md-nav__link> <span class=md-ellipsis> Langchain Chatbot with Opensearch </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> Model Customization </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Model Customization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../custom-models/model-distillation/Historical_invocation_distillation/ class=md-nav__link> <span class=md-ellipsis> Model Distillation with Invocation Logs </span> </a> </li> <li class=md-nav__item> <a href=../../../../custom-models/model-distillation/Distillation-via-S3-input/ class=md-nav__link> <span class=md-ellipsis> Model Distillation with S3 Data </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Gen AI Usecases </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Gen AI Usecases </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> Text Generation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Text Generation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../genai-use-cases/text-generation/how_to_work_with_text_generation_w_bedrock/ class=md-nav__link> <span class=md-ellipsis> Streaming Response with Converse </span> </a> </li> <li class=md-nav__item> <a href=../../../../genai-use-cases/text-generation/how_to_work_with_code_generation_w_bedrock/ class=md-nav__link> <span class=md-ellipsis> Generate Python Code with Converse </span> </a> </li> <li class=md-nav__item> <a href=../../../../genai-use-cases/text-generation/how_to_work_with_text_translation_w_bedrock/ class=md-nav__link> <span class=md-ellipsis> Text Translation with Converse </span> </a> </li> <li class=md-nav__item> <a href=../../../../genai-use-cases/text-generation/how_to_work_with_text-summarization-titan%2Bclaude/ class=md-nav__link> <span class=md-ellipsis> Text summarization with Converse </span> </a> </li> <li class=md-nav__item> <a href=../../../../genai-use-cases/text-generation/how_to_work_with_batch_example_for_multi_threaded_invocation/ class=md-nav__link> <span class=md-ellipsis> Generate Bulk Emails with Batch Inference </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Workshops </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Workshops </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> Open-source L400 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Open-source L400 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../workshop/open-source-l400/01_usecase_introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction to the Use Case </span> </a> </li> <li class=md-nav__item> <a href=../../../../workshop/open-source-l400/02_Lab_Find%20a%20Dream%20Destination_RAG%20query/ class=md-nav__link> <span class=md-ellipsis> Advanced RAG for Agents </span> </a> </li> <li class=md-nav__item> <a href=../../../../workshop/open-source-l400/02_travel_planner_with_langgraph/ class=md-nav__link> <span class=md-ellipsis> Conversational Memory in Agents </span> </a> </li> <li class=md-nav__item> <a href=../../../../workshop/open-source-l400/03_travel_agent_with_tools/ class=md-nav__link> <span class=md-ellipsis> Multi-Modal and Types of Agents </span> </a> </li> <li class=md-nav__item> <a href=../../../../workshop/open-source-l400/04_travel_booking_multi_agent/ class=md-nav__link> <span class=md-ellipsis> Multi-Agent Collaboration with Human-in-loop </span> </a> </li> <li class=md-nav__item> <a href=../../../../workshop/open-source-l400/05_dream_destination_with_crewai/ class=md-nav__link> <span class=md-ellipsis> Find Dream Destination with CrewAI </span> </a> </li> <li class=md-nav__item> <a href=../../../../workshop/open-source-l400/06_agent_evaluation_with_ragas/ class=md-nav__link> <span class=md-ellipsis> RAGAs Agents Evaluation </span> </a> </li> <li class=md-nav__item> <a href=../../../../workshop/open-source-l400/07_dynamic_tooling_agents/ class=md-nav__link> <span class=md-ellipsis> Dynamic Tool invocation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Open-source L200 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Open-source L200 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../workshop/open-source-l200/02_contextual_text_generation/ class=md-nav__link> <span class=md-ellipsis> Introduction to the Use Case </span> </a> </li> <li class=md-nav__item> <a href=../../../../workshop/open-source-l200/03_retrieval_based_text_application/ class=md-nav__link> <span class=md-ellipsis> Retrieval Based Text Generation </span> </a> </li> <li class=md-nav__item> <a href=../../../../workshop/open-source-l200/04_retrieval_based_chat_application/ class=md-nav__link> <span class=md-ellipsis> Retrieval Based Chat Application </span> </a> </li> <li class=md-nav__item> <a href=../../../../workshop/open-source-l200/05_agent_based_text_generation/ class=md-nav__link> <span class=md-ellipsis> Agent Based Text Generation </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../general/tags/ class=md-nav__link> <span class=md-ellipsis> Tags </span> </a> </li> <li class=md-nav__item> <a href=../../../../general/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <nav class=md-tags> <a href=../../../../general/tags/#agents-function-calling class="md-tag md-tag-icon">Agents/ Function Calling</a> </nav> <h1>Function Calling with Converse</h1> <!-- <h2>How to do function calling with the Converse API</h2> --> <div class="admonition tip inline end"> <p class=admonition-title><a href=https://github.com/aws-samples/amazon-bedrock-samples/blob/main/agents-and-function-calling/function-calling/function_calling_with_converse/function_calling_with_converse.ipynb target=_blank>Open in github</a></p> </div> <h2>Overview</h2> <ul> <li><strong>Basic tool definition and function calling</strong> We define a single tool for simulating a weather forecast lookup tool (<code>get_weather</code>) and allow the model to call this tool.</li> <li><strong>Supplying the model with multiple tools to choose from</strong> Starting from the previous example, we add a tool to search the web (<code>web_search</code>) and give the the model the liberty to decide the tool that is best fit for a given request.</li> <li><strong>Letting the model call multiple tools in a single turn</strong> We modify the conversation flow to support parallel function calling. Then, we present an example where the model needs to call multiple tools in succession.</li> </ul> <h2>Context</h2> <p>This notebook demonstrates how we can improve model capability by using the Converse or ConverseStream API with external functions.</p> <p>Converse and ConverseStream provide a unified structured text action for simplifying the invocations to Bedrock LLMs. It includes the possibility to define tools for implementing external functions that can be called or triggered from the LLMs.</p> <p>As part of these APIs, the <code>toolConfig</code> parameter takes a list of <code>tools</code> in JSON schema. Each tool is defined as a <code>ToolSpec</code>, which includes its name, description and input schema. The model can be forced to call a given tool by supplying <code>toolChoice</code> within <code>toolConfig</code> with <code>{"tool": {"name": &lt;some_tool_name&gt;}}</code>. Each tool receives a unique identifier.</p> <p>When the model chooses to call a tool, the response contains a <code>toolUse</code> object. It includes the tool's identifier, name and the input parameters supplied by the model. The model will also set the <code>stopReason</code> response field to <code>tool_use</code>.</p> <p>If you want to learn more details about the parameters supported in the Bedrock Converse API, read the <a href=https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_Converse.html>api reference</a> and <a href=https://docs.aws.amazon.com/bedrock/latest/userguide/conversation-inference.html>user guide</a>.</p> <h2>Prerequisites</h2> <p>Before you can use Amazon Bedrock, you must carry out the following steps:</p> <ul> <li>Sign up for an AWS account (if you don't already have one) and IAM Role with the necessary permissions for Amazon Bedrock, see <a href=https://docs.aws.amazon.com/bedrock/latest/userguide/getting-started.html#new-to-aws target=_blank>AWS Account and IAM Role</a>.</li> <li>Request access to the foundation models (FM) that you want to use, see <a href=https://docs.aws.amazon.com/bedrock/latest/userguide/getting-started.html#getting-started-model-access target=_blank>Request access to FMs</a>. </li> </ul> <h2>Setup</h2> <div class="admonition info"> <p class=admonition-title>Info</p> <p>This notebook should work well with the Data Science 3.0 kernel (Python 3.10 runtime) in SageMaker Studio</p> </div> <p>Run the cells in this section to install the packages needed by this notebook.</p> <div class=highlight><pre><span></span><code><span class=err>!</span><span class=n>pip3</span> <span class=n>install</span> <span class=n>boto3</span> <span class=o>--</span><span class=n>quiet</span>
<span class=err>!</span><span class=n>pip3</span> <span class=n>install</span> <span class=n>googlesearch</span><span class=o>-</span><span class=n>python</span> <span class=o>--</span><span class=n>quiet</span>
<span class=err>!</span><span class=n>pip3</span> <span class=n>install</span> <span class=n>lxml</span> <span class=o>--</span><span class=n>quiet</span>
<span class=err>!</span><span class=n>pip3</span> <span class=n>install</span> <span class=n>pydantic</span> <span class=o>--</span><span class=n>quiet</span>
</code></pre></div> <p>Although this example leverages Claude 3 Sonnet, Bedrock supports many other models. The full list of models and supported features can be found <a href=https://docs.aws.amazon.com/bedrock/latest/userguide/conversation-inference.html>here</a>. The models are invoked via <code>bedrock-runtime</code>.</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>json</span>
<span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
<span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span>
<span class=kn>import</span> <span class=nn>inspect</span>
<span class=kn>import</span> <span class=nn>boto3</span>
<span class=kn>from</span> <span class=nn>pydantic</span> <span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span><span class=p>,</span> <span class=n>create_model</span>

<span class=n>modelId</span> <span class=o>=</span> <span class=s1>&#39;anthropic.claude-3-sonnet-20240229-v1:0&#39;</span>
<span class=n>region</span> <span class=o>=</span> <span class=s1>&#39;us-east-1&#39;</span>

<span class=n>bedrock</span> <span class=o>=</span> <span class=n>boto3</span><span class=o>.</span><span class=n>client</span><span class=p>(</span>
    <span class=n>service_name</span> <span class=o>=</span> <span class=s1>&#39;bedrock-runtime&#39;</span><span class=p>,</span>
    <span class=n>region_name</span> <span class=o>=</span> <span class=n>region</span><span class=p>,</span>
    <span class=p>)</span>
</code></pre></div> <h2>Basic tool definition and function calling</h3> We set our tools through Python functions and start by defining a tool for simulating a weather forecast lookup tool (`get_weather`). Note in our example we're just returning a constant weather forecast to illustrate the concept, but you could make it fully functional by connecting any weather service API. Later in the example, we call the Open-Meteo API. We define `ToolsList` as a class where individual tools are defined as functions. Note that there is nothing specific to the model used or Bedrock in this definition. <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>ToolsList</span><span class=p>:</span>
    <span class=c1>#Define our get_weather tool function...</span>
    <span class=k>def</span> <span class=nf>get_weather</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>city</span><span class=p>,</span> <span class=n>state</span><span class=p>):</span>
        <span class=n>result</span> <span class=o>=</span> <span class=sa>f</span><span class=s1>&#39;Weather in </span><span class=si>{</span><span class=n>city</span><span class=si>}</span><span class=s1>, </span><span class=si>{</span><span class=n>state</span><span class=si>}</span><span class=s1> is 70F and clear skies.&#39;</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Tool result: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>result</span>
</code></pre></div> Within `toolConfig`, setting `toolChoice` to `{auto: {}}` gives the model the choice to decide if a tool should be called or if it can rely on its internal body of knowledge. <div class=highlight><pre><span></span><code><span class=c1>#Define the configuration for our tool...</span>
<span class=n>toolConfig</span> <span class=o>=</span> <span class=p>{</span>
    <span class=s1>&#39;tools&#39;</span><span class=p>:</span> <span class=p>[],</span>
    <span class=s1>&#39;toolChoice&#39;</span><span class=p>:</span> <span class=p>{</span>
        <span class=s1>&#39;auto&#39;</span><span class=p>:</span> <span class=p>{}</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> Let's structure our tool configuration and append it to our `tools`. We have to clearly define the schema that our tools are expecting in the corresponding functions. The descriptions we provide allow the model to get a sense of the external function's purpose. <div class=highlight><pre><span></span><code><span class=n>toolConfig</span><span class=p>[</span><span class=s1>&#39;tools&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
        <span class=s1>&#39;toolSpec&#39;</span><span class=p>:</span> <span class=p>{</span>
            <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;get_weather&#39;</span><span class=p>,</span>
            <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;Get weather of a location.&#39;</span><span class=p>,</span>
            <span class=s1>&#39;inputSchema&#39;</span><span class=p>:</span> <span class=p>{</span>
                <span class=s1>&#39;json&#39;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;object&#39;</span><span class=p>,</span>
                    <span class=s1>&#39;properties&#39;</span><span class=p>:</span> <span class=p>{</span>
                        <span class=s1>&#39;city&#39;</span><span class=p>:</span> <span class=p>{</span>
                            <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;string&#39;</span><span class=p>,</span>
                            <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;City of the location&#39;</span>
                        <span class=p>},</span>
                        <span class=s1>&#39;state&#39;</span><span class=p>:</span> <span class=p>{</span>
                            <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;string&#39;</span><span class=p>,</span>
                            <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;State of the location&#39;</span>
                        <span class=p>}</span>
                    <span class=p>},</span>
                    <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;city&#39;</span><span class=p>,</span> <span class=s1>&#39;state&#39;</span><span class=p>]</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>})</span>
</code></pre></div> This function simply calls the Converse API given some `toolConfig` and returns the response <div class=highlight><pre><span></span><code><span class=c1>#Function for caling the Bedrock Converse API...</span>
<span class=k>def</span> <span class=nf>converse_with_tools</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span> <span class=n>system</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>toolConfig</span><span class=o>=</span><span class=n>toolConfig</span><span class=p>):</span>
    <span class=n>response</span> <span class=o>=</span> <span class=n>bedrock</span><span class=o>.</span><span class=n>converse</span><span class=p>(</span>
        <span class=n>modelId</span><span class=o>=</span><span class=n>modelId</span><span class=p>,</span>
        <span class=n>system</span><span class=o>=</span><span class=n>system</span><span class=p>,</span>
        <span class=n>messages</span><span class=o>=</span><span class=n>messages</span><span class=p>,</span>
        <span class=n>toolConfig</span><span class=o>=</span><span class=n>toolConfig</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=n>response</span>
</code></pre></div> <h2>Defining the conversation flow</h3> Next, we define a function to manage the conversation flow. For this simple case, the function starts by invoking the model. Should the model choose to execute the tool we have defined, it returns it in `toolUse`. With this, the function runs the selected tool. Lastly, the tool's output is returned in `toolResults` to the model who can be given instructions to format it in a more conversational tone for the user. <h3>Prompt flow</h4> ![basic tool call](./assets/basic_tool_call.png) <div class=highlight><pre><span></span><code><span class=c1>#Function for orchestrating the conversation flow...</span>
<span class=k>def</span> <span class=nf>converse</span><span class=p>(</span><span class=n>prompt</span><span class=p>,</span> <span class=n>system</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>):</span>
    <span class=c1>#Add the initial prompt:</span>
    <span class=n>messages</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>messages</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
        <span class=p>{</span>
            <span class=s2>&quot;role&quot;</span><span class=p>:</span> <span class=s2>&quot;user&quot;</span><span class=p>,</span>
            <span class=s2>&quot;content&quot;</span><span class=p>:</span> <span class=p>[</span>
                <span class=p>{</span>
                    <span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=n>prompt</span>
                <span class=p>}</span>
            <span class=p>]</span>
        <span class=p>}</span>
    <span class=p>)</span>
    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Initial prompt:</span><span class=se>\n</span><span class=si>{</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span><span class=w> </span><span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

    <span class=c1>#Invoke the model the first time:</span>
    <span class=n>output</span> <span class=o>=</span> <span class=n>converse_with_tools</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span> <span class=n>system</span><span class=p>)</span>
    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Output so far:</span><span class=se>\n</span><span class=si>{</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>],</span><span class=w> </span><span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=n>ensure_ascii</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

    <span class=c1>#Add the intermediate output to the prompt:</span>
    <span class=n>messages</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>])</span>

    <span class=n>function_calling</span> <span class=o>=</span> <span class=nb>next</span><span class=p>((</span><span class=n>c</span><span class=p>[</span><span class=s1>&#39;toolUse&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>][</span><span class=s1>&#39;content&#39;</span><span class=p>]</span> <span class=k>if</span> <span class=s1>&#39;toolUse&#39;</span> <span class=ow>in</span> <span class=n>c</span><span class=p>),</span> <span class=kc>None</span><span class=p>)</span>

    <span class=c1>#Check if function calling is triggered:</span>
    <span class=k>if</span> <span class=n>function_calling</span><span class=p>:</span>
        <span class=c1>#Get the tool name and arguments:</span>
        <span class=n>tool_name</span> <span class=o>=</span> <span class=n>function_calling</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span>
        <span class=n>tool_args</span> <span class=o>=</span> <span class=n>function_calling</span><span class=p>[</span><span class=s1>&#39;input&#39;</span><span class=p>]</span> <span class=ow>or</span> <span class=p>{}</span>

        <span class=c1>#Run the tool:</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Running (</span><span class=si>{</span><span class=n>tool_name</span><span class=si>}</span><span class=s2>) tool...&quot;</span><span class=p>)</span>
        <span class=n>tool_response</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>ToolsList</span><span class=p>(),</span> <span class=n>tool_name</span><span class=p>)(</span><span class=o>**</span><span class=n>tool_args</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span>
        <span class=k>if</span> <span class=n>tool_response</span><span class=p>:</span>
            <span class=n>tool_status</span> <span class=o>=</span> <span class=s1>&#39;success&#39;</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>tool_status</span> <span class=o>=</span> <span class=s1>&#39;error&#39;</span>

        <span class=c1>#Add the tool result to the prompt:</span>
        <span class=n>messages</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
            <span class=p>{</span>
                <span class=s2>&quot;role&quot;</span><span class=p>:</span> <span class=s2>&quot;user&quot;</span><span class=p>,</span>
                <span class=s2>&quot;content&quot;</span><span class=p>:</span> <span class=p>[</span>
                    <span class=p>{</span>
                        <span class=s1>&#39;toolResult&#39;</span><span class=p>:</span> <span class=p>{</span>
                            <span class=s1>&#39;toolUseId&#39;</span><span class=p>:</span><span class=n>function_calling</span><span class=p>[</span><span class=s1>&#39;toolUseId&#39;</span><span class=p>],</span>
                            <span class=s1>&#39;content&#39;</span><span class=p>:</span> <span class=p>[</span>
                                <span class=p>{</span>
                                    <span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=n>tool_response</span>
                                <span class=p>}</span>
                            <span class=p>],</span>
                            <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=n>tool_status</span>
                        <span class=p>}</span>
                    <span class=p>}</span>
                <span class=p>]</span>
            <span class=p>}</span>
        <span class=p>)</span>

        <span class=c1>#Invoke the model one more time:</span>
        <span class=n>output</span> <span class=o>=</span> <span class=n>converse_with_tools</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span> <span class=n>system</span><span class=p>)</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Final output:</span><span class=se>\n</span><span class=si>{</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>],</span><span class=w> </span><span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=n>ensure_ascii</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=si>}</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
    <span class=k>return</span>
</code></pre></div> Now, we have everything setup and are ready for testing our function calling bot. If we prompt our model about the weather, it will respond with the formatted string defined in our tool. <div class=highlight><pre><span></span><code><span class=n>prompt</span> <span class=o>=</span> <span class=s2>&quot;What is the weather like in Queens, NY?&quot;</span>


<span class=n>converse</span><span class=p>(</span>
    <span class=n>system</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;You&#39;re provided with a tool that can get the weather information for a specific locations &#39;get_weather&#39;; </span><span class=se>\</span>
<span class=s2>        only use the tool if required. Don&#39;t make reference to the tools in your final answer.&quot;</span><span class=p>}],</span>
    <span class=n>prompt</span> <span class=o>=</span> <span class=n>prompt</span><span class=p>)</span>
</code></pre></div> If we ask a question about another topic, the model will answer the question directly without making a tool call. Notice the absence of `toolUse` in the output. <div class=highlight><pre><span></span><code><span class=n>prompt</span> <span class=o>=</span> <span class=s2>&quot;What is the capital of France?&quot;</span>

<span class=n>converse</span><span class=p>(</span>
    <span class=n>system</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;You&#39;re provided with a tool that can get the weather information for a specific locations &#39;get_weather&#39;; </span><span class=se>\</span>
<span class=s2>        only use the tool if required. Don&#39;t make reference to the tools in your final answer.&quot;</span><span class=p>}],</span>
    <span class=n>prompt</span> <span class=o>=</span> <span class=n>prompt</span><span class=p>)</span>
</code></pre></div> As we can see, the LLM decides whether or not to call the `get_weather` tool depending on the question. You can further improve this example by playing with the system prompts. <h2>Supplying the model with multiple tools to choose from</h2> In many cases, it makes sense to supply the model with multiple external functions to choose from. We explore a slightly more evolved case from the one described above to not only have a `get_weather` tool, but also have a fully functional `web_search` tool that can look up information in the Internet for enriching our responses. For this, we'll leverage a simple public library with a simple web scrapping implementation. <h3>Tool definition</h3> We again define `ToolsList` as a class where individual tools are defined as functions. ![basic tool call](./assets/function_calling_multiple.png) <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>googlesearch</span> <span class=kn>import</span> <span class=n>search</span>
<span class=kn>import</span> <span class=nn>requests</span>
<span class=kn>from</span> <span class=nn>bs4</span> <span class=kn>import</span> <span class=n>BeautifulSoup</span>

<span class=k>class</span> <span class=nc>ToolsList</span><span class=p>:</span>
    <span class=c1>#Define our get_weather tool function...</span>
    <span class=k>def</span> <span class=nf>get_weather</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>city</span><span class=p>,</span> <span class=n>state</span><span class=p>):</span>
        <span class=c1>#print(city, state)</span>
        <span class=n>result</span> <span class=o>=</span> <span class=sa>f</span><span class=s1>&#39;Weather in </span><span class=si>{</span><span class=n>city</span><span class=si>}</span><span class=s1>, </span><span class=si>{</span><span class=n>state</span><span class=si>}</span><span class=s1> is 70F and clear skies.&#39;</span>
        <span class=k>return</span> <span class=n>result</span>

    <span class=c1># Define our web_search tool function...</span>
    <span class=k>def</span> <span class=nf>web_search</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>query</span><span class=p>):</span>
        <span class=n>results</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>response_list</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>results</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=n>r</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>search</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>&#39;en&#39;</span><span class=p>)])</span>
        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=n>results</span><span class=p>:</span>
            <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>j</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
                <span class=n>soup</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=s1>&#39;html.parser&#39;</span><span class=p>)</span>
                <span class=n>response_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>soup</span><span class=o>.</span><span class=n>get_text</span><span class=p>()</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
        <span class=n>response_text</span> <span class=o>=</span> <span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>response_list</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>response_text</span>
</code></pre></div> We reset `toolConfig` to load it with the new set of tools. <div class=highlight><pre><span></span><code><span class=n>toolConfig</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;tools&#39;</span><span class=p>:</span> <span class=p>[],</span> <span class=s1>&#39;toolChoice&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;auto&#39;</span><span class=p>:</span> <span class=p>{}}}</span>
</code></pre></div> Similarily, we append the new tools to the `tools` section of the object. <div class=highlight><pre><span></span><code><span class=c1># Add the get_weather tool...</span>
<span class=n>toolConfig</span><span class=p>[</span><span class=s1>&#39;tools&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
        <span class=s1>&#39;toolSpec&#39;</span><span class=p>:</span> <span class=p>{</span>
            <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;get_weather&#39;</span><span class=p>,</span>
            <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;Get weather of a location.&#39;</span><span class=p>,</span>
            <span class=s1>&#39;inputSchema&#39;</span><span class=p>:</span> <span class=p>{</span>
                <span class=s1>&#39;json&#39;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;object&#39;</span><span class=p>,</span>
                    <span class=s1>&#39;properties&#39;</span><span class=p>:</span> <span class=p>{</span>
                        <span class=s1>&#39;city&#39;</span><span class=p>:</span> <span class=p>{</span>
                            <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;string&#39;</span><span class=p>,</span>
                            <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;City of the location&#39;</span>
                        <span class=p>},</span>
                        <span class=s1>&#39;state&#39;</span><span class=p>:</span> <span class=p>{</span>
                            <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;string&#39;</span><span class=p>,</span>
                            <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;State of the location&#39;</span>
                        <span class=p>}</span>
                    <span class=p>},</span>
                    <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;city&#39;</span><span class=p>,</span> <span class=s1>&#39;state&#39;</span><span class=p>]</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>})</span>

<span class=c1># Add the web_search tool...</span>
<span class=n>toolConfig</span><span class=p>[</span><span class=s1>&#39;tools&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
        <span class=s1>&#39;toolSpec&#39;</span><span class=p>:</span> <span class=p>{</span>
            <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;web_search&#39;</span><span class=p>,</span>
            <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;Search a term in the public Internet. </span><span class=se>\</span>
<span class=s1>                Useful for getting up to date information.&#39;</span><span class=p>,</span>
            <span class=s1>&#39;inputSchema&#39;</span><span class=p>:</span> <span class=p>{</span>
                <span class=s1>&#39;json&#39;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;object&#39;</span><span class=p>,</span>
                    <span class=s1>&#39;properties&#39;</span><span class=p>:</span> <span class=p>{</span>
                        <span class=s1>&#39;search_term&#39;</span><span class=p>:</span> <span class=p>{</span>
                            <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;string&#39;</span><span class=p>,</span>
                            <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;Term to search in the Internet&#39;</span>
                        <span class=p>}</span>
                    <span class=p>},</span>
                    <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;search_term&#39;</span><span class=p>]</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>})</span>
</code></pre></div> <h3>Defining the conversation flow</h3> We reuse the `converse` method defined above to control the flow of conversation. It can be reused to support any number of tools. If we prompt our model about the weather, it will respond with the same formatted string defined in our `get_weather` tool. <div class=highlight><pre><span></span><code><span class=n>prompt</span> <span class=o>=</span> <span class=s2>&quot;What is the weather like in Queens, NY?&quot;</span>

<span class=n>converse</span><span class=p>(</span>
    <span class=n>system</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;You&#39;re provided with a tool that can get the weather information for a specific locations &#39;get_weather&#39;, and another tool to perform a web search for up to date information &#39;web_search&#39;; </span><span class=se>\</span>
<span class=s2>        use those tools if required. Don&#39;t mention the tools in your final answer.&quot;</span><span class=p>}],</span>
    <span class=n>prompt</span> <span class=o>=</span> <span class=n>prompt</span>
<span class=p>)</span>
</code></pre></div> If we prompt our model with another topic, it will respond a result from the web by using the `web_search` tool. <div class=highlight><pre><span></span><code><span class=n>prompt</span> <span class=o>=</span> <span class=s2>&quot;In which team is Caitlin Clark playing in the WNBA in 2024?&quot;</span>

<span class=n>converse</span><span class=p>(</span>
    <span class=n>system</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;You&#39;re provided with a tool that can get the weather information for a specific locations &#39;get_weather&#39;, and another tool to perform a web search for up to date information &#39;web_search&#39;; </span><span class=se>\</span>
<span class=s2>        use those tools if required. Don&#39;t mention the tools in your final answer.&quot;</span><span class=p>}],</span>
    <span class=n>prompt</span> <span class=o>=</span> <span class=n>prompt</span>
<span class=p>)</span>
</code></pre></div> As we can see, the LLM decides whether to call the `get_weather` tool, provide an answer without any tool, or searching in the public Internet with the `web_search` tool. <h2>Letting the model call multiple tools in a single turn</h2> <h3>Parallel functions</h3> Parallel function refers to the model's ability to make multiple calls to one or more tools in a single turn. By allowing the model to decompose the requester's question into multiple subproblems each solvable with a tool, it is able to increase its level flexibility. <h4>Tool as Pydantic definition</h4> To do this, we use Pydantic, a data-validation library. We rely on a Pydantic-based helper function for doing the tool config translation for us in a way that ensures we avoid potential mistakes when defining our tool config schema in a JSON dictionary. <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>tool</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>description</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>decorator</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
        <span class=c1># defining our model inheriting from pydantic.BaseModel and define fields as annotated attributes</span>
        <span class=n>input_model</span> <span class=o>=</span> <span class=n>create_model</span><span class=p>(</span>
            <span class=n>func</span><span class=o>.</span><span class=vm>__name__</span> <span class=o>+</span> <span class=s2>&quot;_input&quot;</span><span class=p>,</span>
            <span class=o>**</span><span class=p>{</span>
                <span class=n>name</span><span class=p>:</span> <span class=p>(</span><span class=n>param</span><span class=o>.</span><span class=n>annotation</span><span class=p>,</span> <span class=n>param</span><span class=o>.</span><span class=n>default</span><span class=p>)</span>
                <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>param</span> <span class=ow>in</span> <span class=n>inspect</span><span class=o>.</span><span class=n>signature</span><span class=p>(</span><span class=n>func</span><span class=p>)</span><span class=o>.</span><span class=n>parameters</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
                <span class=k>if</span> <span class=n>param</span><span class=o>.</span><span class=n>default</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>inspect</span><span class=o>.</span><span class=n>Parameter</span><span class=o>.</span><span class=n>empty</span>
            <span class=p>},</span>
        <span class=p>)</span>

        <span class=c1># bedrock tool schema</span>
        <span class=n>func</span><span class=o>.</span><span class=n>bedrock_schema</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s1>&#39;toolSpec&#39;</span><span class=p>:</span> <span class=p>{</span>
                <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=n>name</span><span class=p>,</span>
                <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=n>description</span><span class=p>,</span>
                <span class=s1>&#39;inputSchema&#39;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=s1>&#39;json&#39;</span><span class=p>:</span> <span class=n>input_model</span><span class=o>.</span><span class=n>schema</span><span class=p>()</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>
        <span class=k>return</span> <span class=n>func</span>

    <span class=k>return</span> <span class=n>decorator</span>
</code></pre></div> Now we can again define our tool list, and all we need to specify is the name, description, any relevant attributes that are required in our function. Of course we should also add the content of our tool. We define the `get_lat_long` tool to call Open Streat Map to retrieve these coordinates. If you have more tools, you can adapt this cell for testing with your own. <div class=highlight><pre><span></span><code><span class=c1># Define your tools</span>
<span class=k>class</span> <span class=nc>ToolsList</span><span class=p>:</span>
    <span class=c1># define get_lat_long tool</span>
    <span class=nd>@tool</span><span class=p>(</span>
        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;get_lat_long&quot;</span><span class=p>,</span>
        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Get the coordinates of a city based on a location.&quot;</span>
    <span class=p>)</span>
    <span class=k>def</span> <span class=nf>get_lat_long</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>place</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;City of the location&quot;</span><span class=p>))</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Returns the latitude and longitude for a given place name as a dict object of python.&quot;&quot;&quot;</span>
        <span class=n>header_dict</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;User-Agent&quot;</span><span class=p>:</span> <span class=s2>&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36&quot;</span><span class=p>,</span>
            <span class=s2>&quot;referer&quot;</span><span class=p>:</span> <span class=s1>&#39;https://www.guichevirtual.com.br&#39;</span>
        <span class=p>}</span>
        <span class=n>url</span> <span class=o>=</span> <span class=s2>&quot;http://nominatim.openstreetmap.org/search&quot;</span>
        <span class=n>params</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;q&#39;</span><span class=p>:</span> <span class=n>place</span><span class=p>,</span> <span class=s1>&#39;format&#39;</span><span class=p>:</span> <span class=s1>&#39;json&#39;</span><span class=p>,</span> <span class=s1>&#39;limit&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>
        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=n>params</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>header_dict</span><span class=p>)</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>response</span><span class=p>:</span>
            <span class=n>lat</span> <span class=o>=</span> <span class=n>response</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=s2>&quot;lat&quot;</span><span class=p>]</span>
            <span class=n>lon</span> <span class=o>=</span> <span class=n>response</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=s2>&quot;lon&quot;</span><span class=p>]</span>
            <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;latitude&quot;</span><span class=p>:</span> <span class=n>lat</span><span class=p>,</span> <span class=s2>&quot;longitude&quot;</span><span class=p>:</span> <span class=n>lon</span><span class=p>}</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>
</code></pre></div> We are now ready to define our configuration, setup the function for invoking Bedrock with Converse, and define our workflow orchestration function as per the previous examples. Using the Pydantic definition allows us to generalize `toolConfig` to any tool supplied to `ToolsList`. <div class=highlight><pre><span></span><code><span class=n>toolConfig</span> <span class=o>=</span> <span class=p>{</span>
    <span class=s1>&#39;tools&#39;</span><span class=p>:</span> <span class=p>[</span><span class=n>tool</span><span class=o>.</span><span class=n>bedrock_schema</span> <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>ToolsList</span><span class=o>.</span><span class=vm>__dict__</span><span class=o>.</span><span class=n>values</span><span class=p>()</span> <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>tool</span><span class=p>,</span> <span class=s1>&#39;bedrock_schema&#39;</span><span class=p>)],</span>
    <span class=s1>&#39;toolChoice&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;auto&#39;</span><span class=p>:</span> <span class=p>{}}</span>
<span class=p>}</span>
</code></pre></div> <h4>Defining the conversation flow</h4> The following `converse` method has been adapted from the previous one to support parallel function calling in a single turn of the conversation. As it did before, the conversation begins with an invocation of the model dedicing whether to use a tool or not. During this step, the model can choose to call any number of tool as many times as it is necessary to complete the request. The model is then supplied the result of the executions in `toolResult` during the subsequent invokation. ![basic tool call](./assets/parallel_function_call.png) <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>converse</span><span class=p>(</span><span class=n>tool_class</span><span class=p>,</span> <span class=n>prompt</span><span class=p>,</span> <span class=n>system</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>toolConfig</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>modelId</span><span class=o>=</span><span class=n>modelId</span><span class=p>):</span>
    <span class=n>messages</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&quot;role&quot;</span><span class=p>:</span> <span class=s2>&quot;user&quot;</span><span class=p>,</span> <span class=s2>&quot;content&quot;</span><span class=p>:</span> <span class=p>[{</span><span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=n>prompt</span><span class=p>}]}]</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Invoking model...&quot;</span><span class=p>)</span>
    <span class=n>output</span> <span class=o>=</span> <span class=n>converse_with_tools</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span> <span class=n>system</span><span class=p>,</span> <span class=n>toolConfig</span><span class=p>)</span>
    <span class=n>messages</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>])</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Got output from model...&quot;</span><span class=p>)</span>

    <span class=n>function_calling</span> <span class=o>=</span> <span class=p>[</span><span class=n>c</span><span class=p>[</span><span class=s1>&#39;toolUse&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>][</span><span class=s1>&#39;content&#39;</span><span class=p>]</span> <span class=k>if</span> <span class=s1>&#39;toolUse&#39;</span> <span class=ow>in</span> <span class=n>c</span><span class=p>]</span>
    <span class=k>if</span> <span class=n>function_calling</span><span class=p>:</span>
        <span class=n>tool_result_message</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;role&quot;</span><span class=p>:</span> <span class=s2>&quot;user&quot;</span><span class=p>,</span> <span class=s2>&quot;content&quot;</span><span class=p>:</span> <span class=p>[]}</span>
        <span class=k>for</span> <span class=n>function</span> <span class=ow>in</span> <span class=n>function_calling</span><span class=p>:</span>
            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Function calling - Calling tool...&quot;</span><span class=p>)</span>
            <span class=n>tool_name</span> <span class=o>=</span> <span class=n>function</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span>
            <span class=n>tool_args</span> <span class=o>=</span> <span class=n>function</span><span class=p>[</span><span class=s1>&#39;input&#39;</span><span class=p>]</span> <span class=ow>or</span> <span class=p>{}</span>
            <span class=n>tool_response</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=nb>getattr</span><span class=p>(</span><span class=n>tool_class</span><span class=p>,</span> <span class=n>tool_name</span><span class=p>)(</span><span class=o>**</span><span class=n>tool_args</span><span class=p>))</span>
            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Function calling - Got tool response...&quot;</span><span class=p>)</span>
            <span class=n>tool_result_message</span><span class=p>[</span><span class=s1>&#39;content&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
                <span class=s1>&#39;toolResult&#39;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=s1>&#39;toolUseId&#39;</span><span class=p>:</span> <span class=n>function</span><span class=p>[</span><span class=s1>&#39;toolUseId&#39;</span><span class=p>],</span>
                    <span class=s1>&#39;content&#39;</span><span class=p>:</span> <span class=p>[{</span><span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=n>tool_response</span><span class=p>}]</span>
                <span class=p>}</span>
            <span class=p>})</span>
        <span class=n>messages</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>tool_result_message</span><span class=p>)</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Function calling - Calling model with result...&quot;</span><span class=p>)</span>

        <span class=n>output</span> <span class=o>=</span> <span class=n>converse_with_tools</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span> <span class=n>system</span><span class=p>,</span> <span class=n>toolConfig</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>messages</span><span class=p>,</span> <span class=n>output</span>
</code></pre></div> We define a system prompt describing the model's role and task. <div class=highlight><pre><span></span><code><span class=c1># System prompt building an optional chain of thought response</span>
<span class=n>system_prompt</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;You&#39;re provided with a tool that can get the coordinates for a specific city &#39;get_lat_long&#39;;</span>
<span class=s2>    only use the tool if required. You can call the tool multiple times in the same response if required. </span><span class=se>\</span>
<span class=s2>    Don&#39;t make reference to the tools in your final answer.&quot;&quot;&quot;</span>
<span class=n>system_prompt</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=n>system_prompt</span><span class=p>}]</span>
</code></pre></div> If we ask for the coordinates of two cities, the model calls `get_lat_long` twice and aggregates the model answers. <div class=highlight><pre><span></span><code><span class=c1># prompt to get up-to-date coordinates of Montreal and Toronto</span>
<span class=n>prompt</span> <span class=o>=</span> <span class=s2>&quot;What are the coordinates for both Paris and in Berlin??&quot;</span>

<span class=n>messages</span><span class=p>,</span> <span class=n>output</span> <span class=o>=</span> <span class=n>converse</span><span class=p>(</span><span class=n>ToolsList</span><span class=p>(),</span> <span class=n>prompt</span><span class=p>,</span> <span class=n>system_prompt</span><span class=p>,</span> <span class=n>toolConfig</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>output</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Output:</span><span class=se>\n</span><span class=si>{</span><span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span><span class=si>}</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Messages:</span><span class=se>\n</span><span class=si>{</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span><span class=w> </span><span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=n>ensure_ascii</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=si>}</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <h3>Chaining tool calls</h3> Tool chaining refers to the ability of the model to reach its goal by calling more than one tool where the output of one tool serves as the input to the next. This more complex workflow requires the model to breakdown the query into subproblems that can individually be met with a call to an external function or the model's own body of knowledge. We define `ToolList` again to include `get_lat_long` and a modified version of the previous `get_weather` function. This new version lerverages the Open-Meteo service translating a given set of coordinates to the currrent weather at those coordinates. Logically, this means that for a given question about the weather in a location, the model must first retrieve the coordinates of that place using `get_lat_long` and use those coordinates when calling `get_weather`. These calls occur in two seperate steps where the model is able to observe outputs, which differs from parallel functions call where the model selects multiple tools in a single turn. <div class=highlight><pre><span></span><code><span class=c1># Define your tools</span>
<span class=k>class</span> <span class=nc>ToolsList</span><span class=p>:</span>
    <span class=c1># define get_lat_long tool</span>
    <span class=nd>@tool</span><span class=p>(</span>
        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;get_lat_long&quot;</span><span class=p>,</span>
        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Get the coordinates of a city based on a location.&quot;</span>
    <span class=p>)</span>
    <span class=k>def</span> <span class=nf>get_lat_long</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>place</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;City of the location&quot;</span><span class=p>))</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Returns the latitude and longitude for a given place name as a dict object of python.&quot;&quot;&quot;</span>
        <span class=n>header_dict</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;User-Agent&quot;</span><span class=p>:</span> <span class=s2>&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36&quot;</span><span class=p>,</span>
            <span class=s2>&quot;referer&quot;</span><span class=p>:</span> <span class=s1>&#39;https://www.guichevirtual.com.br&#39;</span>
        <span class=p>}</span>
        <span class=n>url</span> <span class=o>=</span> <span class=s2>&quot;http://nominatim.openstreetmap.org/search&quot;</span>
        <span class=n>params</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;q&#39;</span><span class=p>:</span> <span class=n>place</span><span class=p>,</span> <span class=s1>&#39;format&#39;</span><span class=p>:</span> <span class=s1>&#39;json&#39;</span><span class=p>,</span> <span class=s1>&#39;limit&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>
        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=n>params</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>header_dict</span><span class=p>)</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>response</span><span class=p>:</span>
            <span class=n>lat</span> <span class=o>=</span> <span class=n>response</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=s2>&quot;lat&quot;</span><span class=p>]</span>
            <span class=n>lon</span> <span class=o>=</span> <span class=n>response</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=s2>&quot;lon&quot;</span><span class=p>]</span>
            <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;latitude&quot;</span><span class=p>:</span> <span class=n>lat</span><span class=p>,</span> <span class=s2>&quot;longitude&quot;</span><span class=p>:</span> <span class=n>lon</span><span class=p>}</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

    <span class=c1># define get_weather tool...</span>
    <span class=nd>@tool</span><span class=p>(</span>
        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;get_weather&quot;</span><span class=p>,</span>
        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Get weather of a location.&quot;</span>
    <span class=p>)</span>
    <span class=k>def</span> <span class=nf>get_weather</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
        <span class=n>latitude</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;latitude of the location&quot;</span><span class=p>),</span> 
        <span class=n>longitude</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;longitude of the location&quot;</span><span class=p>))</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Returns weather data for a given latitude and longitude.&quot;&quot;&quot;</span>
        <span class=n>url</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;https://api.open-meteo.com/v1/forecast?latitude=</span><span class=si>{</span><span class=n>latitude</span><span class=si>}</span><span class=s2>&amp;longitude=</span><span class=si>{</span><span class=n>longitude</span><span class=si>}</span><span class=s2>&amp;current_weather=true&quot;</span>
        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</code></pre></div> We reset `toolConfig` with the new set of functions in `ToolList`. <div class=highlight><pre><span></span><code><span class=n>toolConfig</span> <span class=o>=</span> <span class=p>{</span>
    <span class=s1>&#39;tools&#39;</span><span class=p>:</span> <span class=p>[</span><span class=n>tool</span><span class=o>.</span><span class=n>bedrock_schema</span> <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>ToolsList</span><span class=o>.</span><span class=vm>__dict__</span><span class=o>.</span><span class=n>values</span><span class=p>()</span> <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>tool</span><span class=p>,</span> <span class=s1>&#39;bedrock_schema&#39;</span><span class=p>)],</span>
    <span class=s1>&#39;toolChoice&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;auto&#39;</span><span class=p>:</span> <span class=p>{}}</span>
<span class=p>}</span>
</code></pre></div> <h3>Defining the conversation flow</h3> To simplify the `converse` function, we create a helper function to wrap the call of the function. !!! info This is an example conversation flow that can be extended or simplified using common libraries such as Langchain and LlamaIndex. <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>call_function_and_add_message</span><span class=p>(</span><span class=n>tool_class</span><span class=p>,</span> <span class=n>messages</span><span class=p>,</span> <span class=n>previous_output</span><span class=p>):</span>
    <span class=n>function_calling</span> <span class=o>=</span> <span class=p>[</span><span class=n>c</span><span class=p>[</span><span class=s1>&#39;toolUse&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>previous_output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>][</span><span class=s1>&#39;content&#39;</span><span class=p>]</span> <span class=k>if</span> <span class=s1>&#39;toolUse&#39;</span> <span class=ow>in</span> <span class=n>c</span><span class=p>]</span>
    <span class=k>if</span> <span class=n>function_calling</span><span class=p>:</span>
        <span class=n>function</span> <span class=o>=</span> <span class=n>function_calling</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
        <span class=n>tool_result_message</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;role&quot;</span><span class=p>:</span> <span class=s2>&quot;user&quot;</span><span class=p>,</span> <span class=s2>&quot;content&quot;</span><span class=p>:</span> <span class=p>[]}</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Function calling - Calling tool...&quot;</span><span class=p>)</span>
        <span class=n>tool_name</span> <span class=o>=</span> <span class=n>function</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span>
        <span class=n>tool_args</span> <span class=o>=</span> <span class=n>function</span><span class=p>[</span><span class=s1>&#39;input&#39;</span><span class=p>]</span> <span class=ow>or</span> <span class=p>{}</span>
        <span class=n>tool_response</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=nb>getattr</span><span class=p>(</span><span class=n>tool_class</span><span class=p>,</span> <span class=n>tool_name</span><span class=p>)(</span><span class=o>**</span><span class=n>tool_args</span><span class=p>))</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Function calling - Got tool response...&quot;</span><span class=p>)</span>
        <span class=n>tool_result_message</span><span class=p>[</span><span class=s1>&#39;content&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
            <span class=s1>&#39;toolResult&#39;</span><span class=p>:</span> <span class=p>{</span>
                <span class=s1>&#39;toolUseId&#39;</span><span class=p>:</span> <span class=n>function</span><span class=p>[</span><span class=s1>&#39;toolUseId&#39;</span><span class=p>],</span>
                <span class=s1>&#39;content&#39;</span><span class=p>:</span> <span class=p>[{</span><span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=n>tool_response</span><span class=p>}]</span>
            <span class=p>}</span>
        <span class=p>})</span>
        <span class=n>messages</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>tool_result_message</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>messages</span>
</code></pre></div> As previously described, our workflow involves at most two function calls. We adjust the `converse` function again to match this flow. ![basic tool call](./assets/function_call_succession.png) <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>converse</span><span class=p>(</span><span class=n>tool_class</span><span class=p>,</span> <span class=n>prompt</span><span class=p>,</span> <span class=n>system</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>toolConfig</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>modelId</span><span class=o>=</span><span class=n>modelId</span><span class=p>):</span>
    <span class=n>messages</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&quot;role&quot;</span><span class=p>:</span> <span class=s2>&quot;user&quot;</span><span class=p>,</span> <span class=s2>&quot;content&quot;</span><span class=p>:</span> <span class=p>[{</span><span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=n>prompt</span><span class=p>}]}]</span>

    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Invoking model...&quot;</span><span class=p>)</span>
    <span class=n>output</span> <span class=o>=</span> <span class=n>converse_with_tools</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span> <span class=n>system</span><span class=p>,</span> <span class=n>toolConfig</span><span class=p>)</span>
    <span class=n>function_calling</span> <span class=o>=</span> <span class=p>[</span><span class=n>c</span><span class=p>[</span><span class=s1>&#39;toolUse&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>][</span><span class=s1>&#39;content&#39;</span><span class=p>]</span> <span class=k>if</span> <span class=s1>&#39;toolUse&#39;</span> <span class=ow>in</span> <span class=n>c</span><span class=p>]</span>
    <span class=k>if</span> <span class=n>function_calling</span><span class=p>:</span>
        <span class=n>messages</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>])</span>

    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Got output from model...&quot;</span><span class=p>)</span>
    <span class=n>messages</span> <span class=o>=</span> <span class=n>call_function_and_add_message</span><span class=p>(</span><span class=n>tool_class</span><span class=p>,</span> <span class=n>messages</span><span class=p>,</span> <span class=n>output</span><span class=p>)</span>

    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Function calling - Calling model with result...&quot;</span><span class=p>)</span>
    <span class=n>output</span> <span class=o>=</span> <span class=n>converse_with_tools</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span> <span class=n>system</span><span class=p>,</span> <span class=n>toolConfig</span><span class=p>)</span>
    <span class=n>function_calling</span> <span class=o>=</span> <span class=p>[</span><span class=n>c</span><span class=p>[</span><span class=s1>&#39;toolUse&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>][</span><span class=s1>&#39;content&#39;</span><span class=p>]</span> <span class=k>if</span> <span class=s1>&#39;toolUse&#39;</span> <span class=ow>in</span> <span class=n>c</span><span class=p>]</span>
    <span class=k>if</span> <span class=n>function_calling</span><span class=p>:</span>
        <span class=n>messages</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>])</span>

    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Got output from model...&quot;</span><span class=p>)</span>
    <span class=n>messages</span> <span class=o>=</span> <span class=n>call_function_and_add_message</span><span class=p>(</span><span class=n>tool_class</span><span class=p>,</span> <span class=n>messages</span><span class=p>,</span> <span class=n>output</span><span class=p>)</span>
    <span class=n>output</span> <span class=o>=</span> <span class=n>converse_with_tools</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span> <span class=n>system</span><span class=p>,</span> <span class=n>toolConfig</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>messages</span><span class=p>,</span> <span class=n>output</span>
</code></pre></div> We adjust the system prompt to account for the availability of multiple tools. <div class=highlight><pre><span></span><code><span class=c1># System prompt building an optional chain of thought response</span>
<span class=n>system_prompt</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;You&#39;re provided with a tool that can get the coordinates for a specific city &#39;get_lat_long&#39;</span>
<span class=s2>    and a tool that can get the weather for that city, but requires the coordinates &#39;get_weather&#39;;</span>
<span class=s2>    only use the tool if required. You can call the tool multiple times in the same response if required. </span><span class=se>\</span>
<span class=s2>    Don&#39;t make reference to the tools in your final answer.&quot;&quot;&quot;</span>
<span class=n>system_prompt</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=n>system_prompt</span><span class=p>}]</span>
</code></pre></div> If we ask for the weather of a given city, the model calls `get_lat_long` then `get_weather`. <div class=highlight><pre><span></span><code><span class=c1># prompt to get up-to-date weather on Montreal</span>
<span class=n>prompt</span> <span class=o>=</span> <span class=s2>&quot;What is the weather in Montreal??&quot;</span>

<span class=n>messages</span><span class=p>,</span> <span class=n>output</span> <span class=o>=</span> <span class=n>converse</span><span class=p>(</span><span class=n>ToolsList</span><span class=p>(),</span> <span class=n>prompt</span><span class=p>,</span> <span class=n>system_prompt</span><span class=p>,</span> <span class=n>toolConfig</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>output</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Output:</span><span class=se>\n</span><span class=si>{</span><span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span><span class=si>}</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Messages:</span><span class=se>\n</span><span class=si>{</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span><span class=w> </span><span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=n>ensure_ascii</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=si>}</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> If we ask for the coordinates of a given city, the model calls `get_lat_long`. <div class=highlight><pre><span></span><code><span class=c1># prompt to get up-to-date weather on Montreal</span>
<span class=n>prompt</span> <span class=o>=</span> <span class=s2>&quot;What are the coordinates in Montreal??&quot;</span>

<span class=n>messages</span><span class=p>,</span> <span class=n>output</span> <span class=o>=</span> <span class=n>converse</span><span class=p>(</span><span class=n>ToolsList</span><span class=p>(),</span> <span class=n>prompt</span><span class=p>,</span> <span class=n>system_prompt</span><span class=p>,</span> <span class=n>toolConfig</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>output</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Output:</span><span class=se>\n</span><span class=si>{</span><span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span><span class=si>}</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Messages:</span><span class=se>\n</span><span class=si>{</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span><span class=w> </span><span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=n>ensure_ascii</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=si>}</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> If we ask an unrelated question to our tools, the model will not call the tools. <div class=highlight><pre><span></span><code><span class=c1># prompt to get up-to-date weather on Montreal</span>
<span class=n>prompt</span> <span class=o>=</span> <span class=s2>&quot;What is SageMaker??&quot;</span>

<span class=n>messages</span><span class=p>,</span> <span class=n>output</span> <span class=o>=</span> <span class=n>converse</span><span class=p>(</span><span class=n>ToolsList</span><span class=p>(),</span> <span class=n>prompt</span><span class=p>,</span> <span class=n>system_prompt</span><span class=p>,</span> <span class=n>toolConfig</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>output</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Output:</span><span class=se>\n</span><span class=si>{</span><span class=n>output</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span><span class=si>}</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Messages:</span><span class=se>\n</span><span class=si>{</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span><span class=w> </span><span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=n>ensure_ascii</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=si>}</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <h2>Next Steps</h2> This notebook demonstrates function calling with the Converse API with one or multiple tools.These tools can be called both in parallel and in succession. As a next step, explore similar implementation using the **Langchain** integration with Amazon Bedrock's Converse API to reduce the amount of code necessary for the solution. <h2>Cleanup</h2> There is no clean up necessary for this notebook. <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by <a href="https://github.com/aws-samples/amazon-bedrock-samples/issues/new?title=[Online Feedback]: Short-Summary-of-Issue&body=Page URL: /agents-and-function-calling/function-calling/function_calling_with_converse/function_calling_with_converse/" target=_blank rel=noopener>creating an issue</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../../bedrock-agents/use-case-examples/product-review-agent/main/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Product Review Agent"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Product Review Agent </div> </div> </a> <a href=../../function_calling_with_invoke/function_calling_model_with_invoke/ class="md-footer__link md-footer__link--next" aria-label="Next: Function Calling with Invoke"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Function Calling with Invoke </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved. </div> </div> <div class=md-social> <a href=https://github.com/aws-samples/amazon-bedrock-samples/tree/main target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["tags", "toc.integrate", "content.code.copy", "content.code.select", "content.code.annotate", "navigation.footer", "search.highlight", "search.suggest"], "search": "../../../../assets/javascripts/workers/search.6ce7567c.min.js", "tags": {"Compatibility": "compat"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../assets/javascripts/bundle.88dd0f4e.min.js></script> <script src=../../../../javascript/feedback.js></script> </body> </html>